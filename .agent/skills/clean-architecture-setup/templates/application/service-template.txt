{{APPLICATION_SERVICE_NAME}}

Description: {{DESCRIPTION}}

Use Case: {{USE_CASE}}

Dependencies:
- {{DEPENDENCY_1}}: {{TYPE_1}}
- {{DEPENDENCY_2}}: {{TYPE_2}}

---

<?php

namespace App\Application\{{CONTEXT}}\Services;

use App\Application\{{CONTEXT}}\Commands\{{COMMAND_NAME}};
use App\Application\{{CONTEXT}}\Handlers\{{HANDLER_NAME}};
use App\Application\Ports\{EventBus, EmailService};
use App\Domain\{{CONTEXT}}\Repositories\{{REPOSITORY_NAME}};

final class {{APPLICATION_SERVICE_NAME}}
{
    public function __construct(
        private {{HANDLER_NAME}} $handler,
        private EventBus $eventBus,
        private EmailService $emailService
    ) {}
    
    public function {{METHOD_NAME}}({{COMMAND_NAME}} $command): {{RETURN_TYPE}}
    {
        // 1. Execute main use case
        $result = $this->handler->handle($command);
        
        // 2. Publish domain events
        $this->eventBus->publish(new {{EVENT_NAME}}($result));
        
        // 3. Send notifications
        $this->emailService->send{{NOTIFICATION_TYPE}}($command->{{EMAIL_FIELD}});
        
        // 4. Return result
        return $result;
    }
}
